<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <title>Gantt Diagram - {{ project.name }}</title>
    <link rel="stylesheet" href="https://cdn.dhtmlx.com/gantt/edge/dhtmlxgantt.css">
    <style>
        html, body { height: 100%; padding: 0; margin: 0; overflow: hidden; }
        #gantt_here { width: 100%; height: 100%; }
        .back-btn {
            position: absolute;
            top: 10px;
            right: 20px;
            z-index: 999;
            background-color: #005a9c;
            color: white;
            padding: 10px 15px;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
            font-family: sans-serif;
        }
    </style>
</head>
<body>

    <a href="{% url 'project-detail' project.id %}" class="back-btn">Vissza a Projekthez</a>

    <div id="gantt_here"></div>

    <script src="https://cdn.dhtmlx.com/gantt/edge/dhtmlxgantt.js"></script>

    <script>
        // Konfiguráció
        gantt.config.date_format = "%Y-%m-%d"; // Ahogy a Django küldi
        gantt.config.xml_date = "%Y-%m-%d";
        gantt.config.columns = [
            {name:"text", label:"Feladat neve", width:"*", tree:true },
            {name:"start_date", label:"Kezdés", align:"center" },
            {name:"duration", label:"Napok", align:"center" },
            {name:"add", label:"", width:44 }
        ];

        // Skála beállítása (Hónap / Nap)
        gantt.config.scale_unit = "month";
        gantt.config.date_scale = "%F, %Y";
        gantt.config.subscales = [
            {unit:"day", step:1, date:"%j, %D" }
        ];

        // Inicializálás
        gantt.init("gantt_here");

        // Adatok betöltése a Django API-ból
        gantt.load("{% url 'gantt-data' project.id %}", "json");

        // Data Processor (Opcionális: Ha szerkeszteni is akarod a jövőben)
        // var dp = new gantt.dataProcessor("{% url 'gantt-data' project.id %}");
        // dp.init(gantt);
        // dp.setTransactionMode("REST");
    </script>
</body>
</html>