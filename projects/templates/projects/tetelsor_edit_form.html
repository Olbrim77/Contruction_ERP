{% extends 'projects/base.html' %}

{% block title %}Tétel Szerkesztése{% endblock %}

{% block breadcrumbs %}
    <a href="{% url 'project-detail' project.id %}">{{ project.name }}</a> / <span>Tétel</span>
{% endblock %}

{% block extra_css %}
<style>
    .form-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 20px; }
    .main-card { background: #fff; padding: 30px; border-radius: 8px; border: 1px solid var(--border); }
    .side-card { background: #f8f9fa; padding: 20px; border-radius: 8px; border: 1px solid var(--border); height: fit-content; }

    h3 { margin-top: 0; color: var(--primary); border-bottom: 2px solid #eee; padding-bottom: 10px; margin-bottom: 20px; }
    label { display: block; font-weight: 600; margin-bottom: 5px; color: #555; font-size: 0.9em; }
    input, select, textarea { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; margin-bottom: 15px; }

    .row { display: flex; gap: 15px; }
    .col { flex: 1; }
</style>
{% endblock %}

{% block content %}
<form method="POST">
    {% csrf_token %}

    <div class="form-grid">
        <div class="main-card">
            <h3>✏️ Tétel Adatai</h3>

            <label>Tétel Leírása</label>
            {{ form.leiras }}

            <div class="row">
                <div class="col">
                    <label>Mennyiség</label>
                    {{ form.mennyiseg }}
                </div>
                <div class="col">
                    <label>Egység</label>
                    {{ form.egyseg }}
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <label>Norma (óra/egység)</label>
                    {{ form.normaido }}
                </div>
                <div class="col">
                    <label>Anyagár (Ft/egység)</label>
                    {{ form.anyag_egysegar }}
                </div>
            </div>

            <label>Megjegyzés</label>
            {{ form.megjegyzes }}

            <div style="margin-top: 20px; text-align: right;">
                <a href="{% url 'project-detail' project.id %}" class="btn btn-secondary">Mégse</a>
                <button type="submit" class="btn btn-success">{{ submit_label|default:"Mentés" }}</button>
            </div>
        </div>

        <div class="side-card">
            <h3>⚙️ Beállítások</h3>

            <label>Munkanem</label>
            {{ form.munkanem }}

            <label>Alvállalkozó</label>
            {{ form.alvallalkozo }}

            <label>Központi Anyag (Opcionális)</label>
            {{ form.material }}

            <hr style="border:0; border-top:1px solid #ddd; margin: 15px 0;">

            <h4>Előrehaladás</h4>
            <label>Készültség (%)</label>
            {{ form.progress_percentage }}

            <label>Saját munka aránya (%)</label>
            {{ form.labor_split_percentage }}

            <hr style="border:0; border-top:1px solid #ddd; margin: 15px 0;">

            <h4>Kódok</h4>
            <div class="row">
                <div class="col"><label>ENGY</label>{{ form.engy_kod }}</div>
                <div class="col"><label>K-Jel</label>{{ form.k_jelzo }}</div>
            </div>
            <label>CPR Kód</label>{{ form.cpr_kod }}
        </div>
    </div>
</form>
{% endblock %}