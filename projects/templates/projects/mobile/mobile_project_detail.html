{% extends 'projects/base.html' %}
{% load humanize %}

{% block title %}{{ project.name }}{% endblock %}

{% block extra_css %}
<style>
    /* Mobil-specifikus alapok */
    body { background-color: #f0f2f5; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }

    .mobile-container {
        max-width: 600px;
        margin: 0 auto;
        padding: 15px;
        min-height: 100vh;
    }

    /* Vissza gomb */
    .back-link {
        display: inline-block;
        margin-bottom: 15px;
        color: #606770;
        text-decoration: none;
        font-weight: 600;
        font-size: 0.9rem;
    }

    /* Projekt K√°rtya (Fejl√©c) */
    .project-card {
        background: linear-gradient(135deg, #005a9c 0%, #00447c 100%);
        color: white;
        padding: 25px 20px;
        border-radius: 16px;
        box-shadow: 0 4px 15px rgba(0, 90, 156, 0.2);
        margin-bottom: 25px;
        text-align: center;
    }

    .project-name {
        margin: 0 0 5px 0;
        font-size: 1.4rem;
        font-weight: 700;
        line-height: 1.3;
    }

    .project-location {
        font-size: 0.9rem;
        opacity: 0.9;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 5px;
    }

    /* Men√º R√°cs (Nagy Gombok) */
    .menu-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
        margin-bottom: 30px;
    }

    .menu-item {
        background: white;
        padding: 20px 15px;
        border-radius: 12px;
        text-decoration: none;
        color: #1c1e21;
        box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        transition: transform 0.1s, box-shadow 0.1s;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        border: 1px solid #e1e4e8;
    }

    .menu-item:active {
        transform: scale(0.97);
        background-color: #f8f9fa;
    }

    .menu-icon {
        font-size: 2rem;
        margin-bottom: 10px;
    }

    .menu-label {
        font-weight: 600;
        font-size: 0.95rem;
    }

    /* Legut√≥bbi esem√©nyek */
    .recent-section h3 {
        font-size: 1.1rem;
        color: #444;
        margin-bottom: 15px;
        border-left: 4px solid #005a9c;
        padding-left: 10px;
    }

    .log-list {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .log-item {
        background: white;
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 10px;
        border: 1px solid #eee;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .log-date { font-weight: bold; color: #333; font-size: 1rem; }
    .log-meta { font-size: 0.85rem; color: #666; margin-top: 2px; }
    .log-badge {
        background: #eef2f7;
        color: #005a9c;
        padding: 4px 8px;
        border-radius: 6px;
        font-size: 0.8rem;
        font-weight: bold;
    }

</style>
{% endblock %}

{% block content %}

<div class="mobile-container">

    <a href="{% url 'mobile-dashboard' %}" class="back-link">‚¨Ö Vissza a projektekhez</a>

    <div class="project-card">
        <h1 class="project-name">{{ project.name }}</h1>
        <div class="project-location">üìç {{ project.location }}</div>
        <div style="margin-top: 10px; font-size: 0.8rem; opacity: 0.8;">
            {{ project.get_status_display }}
        </div>
    </div>

    <div class="menu-grid">

        <a href="{% url 'mobile-daily-log' project.id %}" class="menu-item">
            <span class="menu-icon">üìù</span>
            <span class="menu-label">Napi Napl√≥</span>
        </a>

        <a href="{% url 'mobile-attendance' project.id %}" class="menu-item">
            <span class="menu-icon">üë∑</span>
            <span class="menu-label">Jelenl√©ti √çv</span>
        </a>

        <a href="#" class="menu-item" style="opacity: 0.6;">
            <span class="menu-icon">üì∑</span>
            <span class="menu-label">Gal√©ria</span>
        </a>

        <a href="#" class="menu-item" style="opacity: 0.6;">
            <span class="menu-icon">üß±</span>
            <span class="menu-label">Anyagok</span>
        </a>

    </div>

    <div class="recent-section">
        <h3>Legut√≥bbi Napl√≥k</h3>

        {% if project.daily_logs.exists %}
            <ul class="log-list">
                {% for log in project.daily_logs.all|slice:":3" %}
                <li class="log-item">
                    <div>
                        <div class="log-date">{{ log.date|date:"Y.m.d" }}</div>
                        <div class="log-meta">{{ log.get_weather_display }}</div>
                    </div>
                    <div class="log-badge">{{ log.workforce }} f≈ë</div>
                </li>
                {% endfor %}
            </ul>
        {% else %}
            <p style="text-align: center; color: #999; margin-top: 20px;">M√©g nincs r√∂gz√≠tett napl√≥.</p>
        {% endif %}
    </div>

</div>

{% endblock %}